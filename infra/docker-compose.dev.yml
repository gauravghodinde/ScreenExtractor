version: '3.8'

services:
  worker:
    volumes:
      # Mount source code directly - changes are reflected immediately
      - ../worker/src:/app/src:ro
    # Override CMD to enable auto-reload
    command: sh -c "python3 -m scene_seeker_worker.worker & uvicorn scene_seeker_worker.search_api:app --host 0.0.0.0 --port 50052 --reload"

  orchestrator:
    volumes:
      # If you want hot reload for Go, you'd need to set up air or similar
      # For now, just mounting is not enough for compiled languages
      - ../go:/app:ro
